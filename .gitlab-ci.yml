variables:
  IMAGE_TAG_FRONTEND: $CI_REGISTRY_IMAGE/sonicast_front:1.0
  IMAGE_TAG_BACKEND: $CI_REGISTRY_IMAGE/sonicast_back:1.0
  IMAGE_NAME_FRONTEND: sonicast_front
  IMAGE_NAME_BACKEND: sonicast_back 

stages:
  - build
  - deploy

# ---

job_build:sonicast_front:
  stage: build
  script:
    - mv ${IMAGE_NAME_FRONTEND}/* .
    - docker build -t $IMAGE_TAG_FRONTEND .
    - docker push $IMAGE_TAG_FRONTEND

job_build:sonicast_back:
  stage: build
  script:
    - mv ${IMAGE_NAME_BACKEND}/* .
    - docker build -t $IMAGE_TAG_BACKEND .
    - docker push $IMAGE_TAG_BACKEND
# ---

job_deploy:
  stage: deploy
  script:
    - echo "This job deploy something."
    - echo "Only when all test jobs are finished."